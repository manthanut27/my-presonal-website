<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MoMs kitchen</title>
    <link rel="stylesheet" href="homepage.css">
</head>

<body>
    <header>
        <img id="header-img" src="https://images.unsplash.com/photo-1600891964599-f61ba0e24092" alt="Restaurant Banner">
        <h1>MoM's kitchen</h1>
        <nav>
            <a href="#menu">Menu</a>
            <a href="#order">Place your order</a>
        </nav>
    </header>

    <main>
        <h2 id="center-align">Menu</h2>
        <section id="menu">
            <!-- your articles ... keep as-is -->
        </section>

        <section id="order">
            <h2>Place your order</h2>
            <form id="orderForm">
                <!-- Quantities grouped inside a fieldset -->
                <fieldset>
                    <legend>Items (enter quantities)</legend>
                    <label for="salmon">Lemon Grilled Salmon
            <input type="number" id="salmon" name="salmon" min="0" max="10" value="0">
          </label>
                    <label for="bavette">Bavette Steak
            <input type="number" id="bavette" name="bavette" min="0" max="10" value="0">
          </label>
                    <label for="pasta">One Pan Garlic Parmesan Chicken Pasta
            <input type="number" id="pasta" name="pasta" min="0" max="10" value="0">
          </label>
                </fieldset>

                <fieldset>
                    <legend>Addons</legend>
                    <label><input type="checkbox" name="addons" value="extra-cheese"> Extra Cheese</label>
                    <label><input type="checkbox" name="addons" value="bacon"> Crispy Bacon</label>
                    <label><input type="checkbox" name="addons" value="spicy-sauce"> Spicy Sauce</label>
                </fieldset>

                <fieldset>
                    <legend>Select Sides:</legend>
                    <label><input type="radio" name="side" value="salad"> Side Salad</label>
                    <label><input type="radio" name="side" value="fries"> Extra Fries</label>
                    <label><input type="radio" name="side" value="none" checked> No Side</label>
                </fieldset>

                <label for="special-requests">Special Requests:
          <textarea id="special-requests" name="special" rows="4" placeholder="Allergic to anything? Extra crispy?"></textarea>
        </label>

                <label for="customerName">Your name:
          <input id="customerName" name="customerName" type="text" placeholder="Your name (optional)">
        </label>
                <label for="customerEmail">Your email:
          <input id="customerEmail" name="customerEmail" type="email" placeholder="your@email.com (optional)">
        </label>
                <label for="customerPhone">Phone:
          <input id="customerPhone" name="customerPhone" type="text" placeholder="Optional phone">
        </label>

                <input type="submit" value="Go To Checkout">
                <div id="orderMessage" style="margin-top:10px;"></div>
            </form>
        </section>

        <footer>
            <p>Made with love by MoM's kitchen</p>
        </footer>
    </main>

    <script>
        document.getElementById('orderForm').addEventListener('submit', async(e) => {
            e.preventDefault();
            const form = e.target;

            const items = {
                "Lemon Grilled Salmon": Number(form.salmon.value || 0),
                "Bavette Steak": Number(form.bavette.value || 0),
                "Garlic Parmesan Chicken Pasta": Number(form.pasta.value || 0)
            };

            const addons = Array.from(form.querySelectorAll('input[name="addons"]:checked')).map(i => i.value);
            const side = form.side.value;
            const special = form.special.value;
            const customerName = form.customerName.value;
            const customerEmail = form.customerEmail.value;
            const customerPhone = form.customerPhone.value;

            const payload = {
                items,
                addons,
                side,
                special,
                customerName,
                customerEmail,
                customerPhone
            };

            try {
                const res = await fetch('/order', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                const data = await res.json();
                const msg = document.getElementById('orderMessage');
                if (data.success) {
                    msg.style.color = 'green';
                    msg.textContent = 'Order sent — you will receive confirmation soon!';
                    form.reset();
                } else {
                    msg.style.color = 'red';
                    msg.textContent = 'Failed to send order. Try again later.';
                }
            } catch (err) {
                document.getElementById('orderMessage').style.color = 'red';
                document.getElementById('orderMessage').textContent = 'Network error — could not reach server.';
            }
        });
    </script>
</body>

</html>